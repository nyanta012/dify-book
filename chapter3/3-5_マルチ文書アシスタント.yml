app:
  description: ã“ã®ã‚¢ãƒ—ãƒªã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›®çš„ã«å¿œã˜ã¦å‡¦ç†ã‚’è‡ªå‹•ã§åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹å¤šæ©Ÿèƒ½æ–‡æ›¸å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚IF/ELSEãƒãƒ¼ãƒ‰ã§æ–‡æ›¸æ ¡æ­£ã¨å ±å‘Šæ›¸ä½œæˆã®2ã¤ã®å‡¦ç†ã‚’åˆ†å²ã•ã›ã€å¤‰æ•°é›†ç´„ãƒãƒ¼ãƒ‰ã§çµæœã‚’çµ±åˆã—ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒãƒ¼ãƒ‰ã§å‡ºåŠ›ã‚’æ•´å½¢ã—ã¾ã™ã€‚1ã¤ã®ã‚¢ãƒ—ãƒªã§è¤‡æ•°ã®ç›®çš„ã«å¯¾å¿œã§ãã‚‹æŸ”è»Ÿãªè¨­è¨ˆã¨ãªã£ã¦ã„ã¾ã™ã€‚
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: ãƒãƒ«ãƒæ–‡æ›¸ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
  use_icon_as_answer_icon: false
kind: app
version: 0.1.5
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: if-else
      id: 1731821021406-source-1731833761062-target
      source: '1731821021406'
      sourceHandle: source
      target: '1731833761062'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1731833761062-true-1731821246278-target
      source: '1731833761062'
      sourceHandle: 'true'
      target: '1731821246278'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1731833761062-3cf24fd1-4397-48b6-952f-fde9903c2886-1731833794737-target
      source: '1731833761062'
      sourceHandle: 3cf24fd1-4397-48b6-952f-fde9903c2886
      target: '1731833794737'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: end
      id: 1731833862303-source-1731821395952-target
      source: '1731833862303'
      sourceHandle: source
      target: '1731821395952'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1731821246278-source-1735481996312-target
      source: '1731821246278'
      sourceHandle: source
      target: '1735481996312'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1731833794737-source-1735481996312-target
      source: '1731833794737'
      sourceHandle: source
      target: '1735481996312'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: variable-aggregator
        targetType: template-transform
      id: 1735481996312-source-1731833862303-target
      source: '1735481996312'
      sourceHandle: source
      target: '1731833862303'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - label: æ–‡æ›¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          max_length: 100000
          options: []
          required: true
          type: paragraph
          variable: input_text
        - label: å‡¦ç†ã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„
          max_length: 48
          options:
          - æ–‡æ›¸ã®æ ¡æ­£ã‚’ã™ã‚‹
          - å ±å‘Šæ›¸ã‚’ä½œæˆã™ã‚‹
          required: true
          type: select
          variable: document_type
      height: 115
      id: '1731821021406'
      position:
        x: 27.14285714285714
        y: 286.5
      positionAbsolute:
        x: 27.14285714285714
        y: 286.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: gpt-4o
          provider: openai
        prompt_template:
        - id: 0f06441c-b8e2-4a29-8732-4bc240a20480
          role: system
          text: "ã‚ãªãŸã¯ãƒ“ã‚¸ãƒã‚¹æ–‡æ›¸ã®æ ¡æ­£ã¨æ”¹å–„ã‚’è¡Œã†å°‚é–€å®¶ã§ã™ã€‚\nå…¥åŠ›ã•ã‚ŒãŸæ–‡æ›¸ã«å¯¾ã—ã¦ä»¥ä¸‹ã®è¦³ç‚¹ã§åˆ†æã¨æ”¹å–„ã‚’è¡Œã£ã¦ãã ã•ã„ï¼š\n\n1.\
            \ æ–‡æ›¸æ§‹æˆã®é©åˆ‡æ€§\n   - æ–‡æ›¸ã®ç¨®é¡ã«å¿œã˜ãŸå¿…è¦ãªè¦ç´ ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹\n   - å†…å®¹ã®é †åºã‚„æ®µè½ã®åŒºåˆ‡ã‚Šã¯é©åˆ‡ã‹\n   - ç®‡æ¡æ›¸ããªã©ã®æ›¸å¼ã¯çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã‹\n\
            \n2. æ–‡ä½“ã®ä¸€è²«æ€§\n   - æ–‡æœ«è¡¨ç¾ã¯çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã‹\n   - æ•¬èªã®ä½¿ã„æ–¹ã¯é©åˆ‡ã‹\n   - å…¨ä½“çš„ãªæ–‡ä½“ã¯ä¸€è²«ã—ã¦ã„ã‚‹ã‹\n\
            \n3. ãƒ“ã‚¸ãƒã‚¹æ–‡æ›¸ã¨ã—ã¦ã®è¡¨ç¾ã®é©åˆ‡ã•\n   - é©åˆ‡ãªæ•¬èªã‚„ä¸å¯§ãªè¡¨ç¾ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹\n   - å£èªçš„ãªè¡¨ç¾ã‚„ä¸é©åˆ‡ãªè¨€ã„å›ã—ã¯ãªã„ã‹\n\
            \   - æ›–æ˜§ãªè¡¨ç¾ã‚„ä¸é©åˆ‡ãªçœç•¥ã¯ãªã„ã‹\n\n4. èª¤å­—è„±å­—ã‚„æ–‡æ³•ã®å•é¡Œ\n   - æ¼¢å­—ã‚„ã²ã‚‰ãŒãªã®ä½¿ã„åˆ†ã‘ã¯é©åˆ‡ã‹\n   - åŒã˜è¨€è‘‰ã®è¡¨è¨˜ã¯çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã‹\n\
            \   - å¥èª­ç‚¹ã®ä½¿ã„æ–¹ã¯é©åˆ‡ã‹\n\n5. åˆ†ã‹ã‚Šã‚„ã™ã•ã€ç°¡æ½”ã•\n   - æ–‡ç« ã®æµã‚Œã¯åˆ†ã‹ã‚Šã‚„ã™ã„ã‹\n   - ä¸å¿…è¦ãªé‡è¤‡ã‚„å†—é•·ãªè¡¨ç¾ã¯ãªã„ã‹\n\
            \   - é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã¯æ˜ç¢ºã«ä¼ã‚ã‚‹ã‹\n\n### ç¾åœ¨ã®æ–‡æ›¸\n{{#1731821021406.input_text#}}\n\n\
            ### åˆ†æ\nä¸Šè¨˜ã®å„è¦³ç‚¹ã«ã¤ã„ã¦ã€å•é¡Œç‚¹ã‚’ç®‡æ¡æ›¸ãã§ç¤ºã—ã¾ã™ã€‚\n\n### æ”¹å–„æ¡ˆ\nå•é¡Œç‚¹ã‚’ä¿®æ­£ã—ãŸæ–‡æ›¸ã‚’ç¤ºã—ã¾ã™ã€‚\n\n###\
            \ è§£èª¬\nä¸»ãªä¿®æ­£ã®ãƒã‚¤ãƒ³ãƒˆã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚"
        selected: false
        title: æ ¡æ­£ç”¨LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 97
      id: '1731821246278'
      position:
        x: 638
        y: 286.5
      positionAbsolute:
        x: 638
        y: 286.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1731833862303'
          - output
          variable: template_output
        selected: false
        title: çµ‚äº†
        type: end
      height: 89
      id: '1731821395952'
      position:
        x: 1550
        y: 286.5
      positionAbsolute:
        x: 1550
        y: 286.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        author: nyanta
        desc: ''
        height: 284
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"#
          æ ¡æ­£å‰ã®æ–‡æ›¸/å ±å‘Šæ›¸ã®æ–‡æ›¸","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"4æœˆ15æ—¥ã®ä¼šè­°å†…å®¹ã®å ±å‘Š","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"å…ˆæ—¥è¡Œã‚ã‚ŒãŸä¼šè­°ã§ã¯ã€ç¬¬1å››åŠæœŸã®å£²ã‚Šä¸Šã’ã«é–¢ã—ã¦è©±ã—åˆã„ã‚’å®Ÿæ–½ã—ã¾ã—ãŸ","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"å£²ä¸Šã¯å‰å¹´å¯¾æ¯”ã§120ï¼…ã¨ã€ã¨ã¦ã‚‚è‰¯ã„çµæœã¨ãªã‚Šã¾ã—ã¦ã€æ–°è¦ã®ãŠå®¢æ§˜ã‹ã‚‰ã®æ³¨æ–‡ãŒå¢—ãˆã¦ã„ã‚‹çŠ¶æ³ã§ã™ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ä½†ã—ã€é–¢è¥¿ã‚¨ãƒªã‚¢ã§ã®å£²ã‚Šä¸Šã’ãŒç›®æ¨™ã‚’ä¸‹ã¾ã‚ã£ã¦ãŠã‚Šã€ã“ã‚ŒãŒèª²é¡Œã§ã‚ã‚Šã¾ã™ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"å¯¾å¿œç­–ã¨ã—ã¾ã—ã¦ä¸‹è¨˜ã®å¯¾ç­–ã‚’å®Ÿæ–½ã™ã‚‹äºˆå®šã§ã”ã–ã„ã¾ã™","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ãƒ»å–¶æ¥­ãƒ¡ãƒ³ãƒãƒ¼ã‚’å¢—ã‚„ã™","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ãƒ»æ–°ã—ã„ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã‚’è¡Œãªã†","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ãƒ»æ—¢å­˜å®¢ã®ãƒ•ã‚©ãƒ­ãƒ¼ã‚’å¼·åŒ–ã™ã‚‹äº‹","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ä¸Šè¨˜æ–½ç­–ã‚’é€šã˜ã€å£²ä¸Šã’ã®å‘ä¸Šã‚’ç›®æŒ‡ã—ã¦å‚ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"å®œã—ããŠé¡˜ã„è‡´ã—ã¾ã™","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 388
      height: 284
      id: '1731821433729'
      position:
        x: 170.21686667385427
        y: -90.81011387509304
      positionAbsolute:
        x: 170.21686667385427
        y: -90.81011387509304
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 388
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: 6ac54539-0257-420d-be5e-ba6795862b9c
            value: æ ¡æ­£
            varType: string
            variable_selector:
            - '1731821021406'
            - document_type
          id: 'true'
          logical_operator: and
        - case_id: 3cf24fd1-4397-48b6-952f-fde9903c2886
          conditions:
          - comparison_operator: contains
            id: ae006305-266f-4ebd-9ec9-d9e7108cec68
            value: å ±å‘Šæ›¸
            varType: string
            variable_selector:
            - '1731821021406'
            - document_type
          id: 3cf24fd1-4397-48b6-952f-fde9903c2886
          logical_operator: and
        desc: ''
        selected: false
        title: IF/ELSE
        type: if-else
      height: 173
      id: '1731833761062'
      position:
        x: 334
        y: 286.5
      positionAbsolute:
        x: 334
        y: 286.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: openai
        prompt_template:
        - id: 5842dd48-3fc0-4793-9be0-5dca8a6fddd1
          role: system
          text: 'ã‚ãªãŸã¯å ±å‘Šæ›¸ä½œæˆã®ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã§ã™ã€‚ä»¥ä¸‹ã®ç‰¹å¾´ã‚’æŒã¤å ±å‘Šæ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š


            - ç°¡æ½”ãªè¦ç´„ã‚’å†’é ­ã«é…ç½®

            - ç›®çš„ã€æ–¹æ³•ã€çµæœã€è€ƒå¯Ÿã®æ˜ç¢ºãªåŒºåˆ†ã‘

            - ãƒ‡ãƒ¼ã‚¿ã‚„äº‹å®Ÿã«åŸºã¥ãå®¢è¦³çš„ãªè¨˜è¿°

            - å…·ä½“çš„ãªæ•°å€¤ã‚„ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã®æ´»ç”¨

            - ç°¡æ½”ã§æ˜ç­ãªæ–‡ç« è¡¨ç¾

            - æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚„æè¨€ã®æ˜ç¤º


            ### å ±å‘Šæ›¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

            1. ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

            2. èƒŒæ™¯ã¨ç›®çš„

            3. å†…å®¹è©³ç´°

            4. çµè«–ã¨æè¨€


            ### å…ƒã®æ–‡ç« 

            {{#1731821021406.input_text#}}'
        selected: false
        title: å ±å‘Šæ›¸ç”¨LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 97
      id: '1731833794737'
      position:
        x: 638
        y: 423.5
      positionAbsolute:
        x: 638
        y: 423.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: true
        template: "{% if document_type == \"æ–‡æ›¸ã®æ ¡æ­£ã‚’ã™ã‚‹\" %}\r\n# æ–‡æ›¸æ ¡æ­£çµæœ\r\n\r\n## ã‚ªãƒªã‚¸ãƒŠãƒ«æ–‡æ›¸\r\
          \n{{content}}\r\n\r\n## æ ¡æ­£çµæœ\r\n{{llm_output}}\r\n\r\n---\r\nâ€»ä¸Šè¨˜ã®æ ¡æ­£çµæœã¯ AI\
          \ ã«ã‚ˆã‚‹ææ¡ˆã§ã™ã€‚\r\næ–‡è„ˆã‚„æ„å›³ã«å¿œã˜ã¦é©åˆ‡ã«åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚\r\n\r\n{% else %}\r\n# å ±å‘Šæ›¸ä½œæˆçµæœ\r\n\r\
          \n{{llm_output}}\r\n\r\n---\r\nâ€»ã“ã®å ±å‘Šæ›¸ã¯ AI ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚\r\nå†…å®¹ã®ç¢ºèªã¨å¿…è¦ã«å¿œã˜ãŸç·¨é›†ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚\r\
          \n{% endif %}"
        title: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
        type: template-transform
        variables:
        - value_selector:
          - '1735481996312'
          - output
          variable: llm_output
        - value_selector:
          - '1731821021406'
          - input_text
          variable: content
        - value_selector:
          - '1731821021406'
          - document_type
          variable: document_type
      height: 53
      id: '1731833862303'
      position:
        x: 1246
        y: 286.5
      positionAbsolute:
        x: 1246
        y: 286.5
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: å¤‰æ•°é›†ç´„å™¨
        type: variable-aggregator
        variables:
        - - '1731821246278'
          - text
        - - '1731833794737'
          - text
      height: 130
      id: '1735481996312'
      position:
        x: 942
        y: 286.5
      positionAbsolute:
        x: 942
        y: 286.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -86.39531271164014
      y: 77.53075896037694
      zoom: 0.870550563296124
